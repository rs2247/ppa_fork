!function(){"use strict";var globals="undefined"==typeof global?self:global;if("function"!=typeof globals.require){var modules={},cache={},aliases={},has={}.hasOwnProperty,expRe=/^\.\.?(\/|$)/,expand=function(root,name){for(var part,results=[],parts=(expRe.test(name)?root+"/"+name:name).split("/"),i=0,length=parts.length;i<length;i++)".."===(part=parts[i])?results.pop():"."!==part&&""!==part&&results.push(part);return results.join("/")},dirname=function(path){return path.split("/").slice(0,-1).join("/")},initModule=function(name,definition){var path,module={id:name,exports:{},hot:hmr&&hmr.createHot(name)};return cache[name]=module,definition(module.exports,(path=name,function(name){var absolute=expand(dirname(path),name);return globals.require(absolute,path)}),module),module.exports},expandAlias=function(name){var val=aliases[name];return val&&name!==val?expandAlias(val):name},require=function(name,loaderPath){null==loaderPath&&(loaderPath="/");var path=expandAlias(name);if(has.call(cache,path))return cache[path].exports;if(has.call(modules,path))return initModule(path,modules[path]);throw new Error("Cannot find module '"+name+"' from '"+loaderPath+"'")};require.alias=function(from,to){aliases[to]=from};var extRe=/\.[^.\/]+$/,indexRe=/\/index(\.[^\/]+)?$/;require.register=require.define=function(bundle,fn){if(bundle&&"object"==typeof bundle)for(var key in bundle)has.call(bundle,key)&&require.register(key,bundle[key]);else modules[bundle]=fn,delete cache[bundle],function(bundle){if(extRe.test(bundle)){var alias=bundle.replace(extRe,"");has.call(aliases,alias)&&aliases[alias].replace(extRe,"")!==alias+"/index"||(aliases[alias]=bundle)}if(indexRe.test(bundle)){var iAlias=bundle.replace(indexRe,"");has.call(aliases,iAlias)||(aliases[iAlias]=bundle)}}(bundle)},require.list=function(){var list=[];for(var item in modules)has.call(modules,item)&&list.push(item);return list};var hmr=globals._hmr&&new globals._hmr((function(name,dep){return expandAlias(expand(dirname(name),dep))}),require,modules,cache);require._cache=cache,require.hmr=hmr&&hmr.wrap,require.brunch=!0,globals.require=require}}(),function(){var global="undefined"==typeof window?this:window,process,__makeRelativeRequire=function(require,mappings,pref){var none={},tryReq=function(name,pref){try{return require(pref+"/node_modules/"+name)}catch(e){if(-1===e.toString().indexOf("Cannot find module"))throw e;if(-1!==pref.indexOf("node_modules")){var s=pref.split("/"),i=s.lastIndexOf("node_modules"),newPref=s.slice(0,i).join("/");return tryReq(name,newPref)}}return none};return function(name){if(name in mappings&&(name=mappings[name]),name){if("."!==name[0]&&pref){var val=tryReq(name,pref);if(val!==none)return val}return require(name)}}};require.register("web/static/js/app.js",(function(exports,require,module){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault"),_classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),_jquery=_interopRequireDefault(require("jquery")),_logging=(_interopRequireDefault(require("lodash")),_interopRequireDefault(require("./logging"))),_navbar=_interopRequireDefault(require("./components/navbar")),_dropdown=_interopRequireDefault(require("./components/dropdown"));window.jQuery=_jquery.default,window.$=_jquery.default,require("bootstrap-sass"),_logging.default.set_level(_logging.default.INFO),Vue.filter("toDelimited",(function(value){return"number"!=typeof value?value:new Intl.NumberFormat("pt-BR",{currency:"BRL",minimumFractionDigits:2,maximumFractionDigits:2}).format(value)})),Vue.filter("toDelimitedInt",(function(value){return"number"!=typeof value?value:new Intl.NumberFormat("pt-BR",{currency:"BRL",minimumFractionDigits:0}).format(value)})),Vue.filter("toPercentage",(function(value){return"number"!=typeof value?value:new Intl.NumberFormat("pt-BR",{minimumFractionDigits:2}).format(value)+"%"})),Vue.filter("toCurrency",(function(value){return"number"!=typeof value?value:new Intl.NumberFormat("pt-BR",{style:"currency",currency:"BRL",minimumFractionDigits:2}).format(value)}));var Chartjs=require("chart.js");Chartjs.plugins.register({afterDatasetsDraw:function(chartInstance,easing){if(1==easing&&chartInstance.options.extended){var drawValues=chartInstance.options.extended.drawValuesInChart,drawPercentages=chartInstance.options.extended.drawPercentageValuesInChart,useAlternativeDataSet=chartInstance.options.extended.useAlternativeDataSet,drawColor=chartInstance.options.extended.drawValuesColor,drawSize=chartInstance.options.extended.drawValuesSize,drawStyle=chartInstance.options.extended.drawValueStyle;if(drawValues||drawPercentages){var ctx=chartInstance.chart.ctx;chartInstance.data.datasets.forEach((function(dataset,i){var fullSum=0,meta=chartInstance.getDatasetMeta(i);for(i=0;i<dataset.data.length;i++)fullSum+=dataset.data[i];meta.hidden||meta.data.forEach((function(element,index){ctx.fillStyle=drawColor||"#FFFFFF";var fontSize=15;drawSize&&(fontSize=drawSize);var fontStyle="normal";drawStyle&&(fontStyle=drawStyle);if(ctx.font=Chartjs.helpers.fontString(fontSize,fontStyle,"proxima-nova"),dataset.data[index]){var percentage=(100*(dataset.data[index]/fullSum).toFixed(2)).toString(),dataString="";dataString=useAlternativeDataSet?dataset.labelsData[index].toString():dataset.data[index].toString(),ctx.textAlign="center",ctx.textBaseline="middle";var padding=5,position=element.tooltipPosition();drawPercentages&&(ctx.fillText(percentage+" %",position.x,position.y-fontSize/2-padding),padding-=25),drawValues&&ctx.fillText(dataString,position.x,position.y-fontSize/2-padding)}}))}))}if(chartInstance.options.extended.drawRectangles&&chartInstance.data.datasets.length>0)for(var _meta=chartInstance.getDatasetMeta(0),i=0;i<chartInstance.options.extended.rectangles.length;i++){var rectangle=chartInstance.options.extended.rectangles[i],xValue=rectangle.x,yValue=rectangle.y,wValue=rectangle.w,hValue=rectangle.h;if(rectangle.to_point){var tPosition=_meta.data[rectangle.to_point.index].tooltipPosition();_meta.data[0]._yScale;wValue=tPosition.x-_meta.data[0]._yScale.right+xValue,hValue=_meta.data[0]._yScale.bottom-tPosition.y+yValue}if(rectangle.to_scale_point){var _yAxes=_meta.data[0]._yScale,xAxes=_meta.data[0]._xScale,yDelta=_yAxes.ticks[0]-_yAxes.ticks[_yAxes.ticks.length-1],yDeltaScale=_meta.data[0]._yScale.bottom-_meta.data[0]._yScale.top,xMin=xAxes.ticks[0],xDelta=xAxes.ticks[xAxes.ticks.length-1]-xMin,xDeltaScale=_meta.data[0]._xScale.right-_meta.data[0]._xScale.left;wValue=rectangle.to_scale_point.x*xDeltaScale/xDelta,hValue=rectangle.to_scale_point.y*yDeltaScale/yDelta}var colorValue=rectangle.color,dashValue=rectangle.dash;if(chartInstance.chart.ctx.beginPath(),chartInstance.chart.ctx.moveTo(_meta.data[0]._yScale.right+xValue,_meta.data[0]._yScale.bottom-yValue),chartInstance.chart.ctx.lineTo(_meta.data[0]._yScale.right+xValue+wValue,_meta.data[0]._yScale.bottom-yValue),chartInstance.chart.ctx.lineTo(_meta.data[0]._yScale.right+xValue+wValue,_meta.data[0]._yScale.bottom-(yValue+hValue)),chartInstance.chart.ctx.lineTo(_meta.data[0]._yScale.right+xValue,_meta.data[0]._yScale.bottom-(yValue+hValue)),chartInstance.chart.ctx.lineTo(_meta.data[0]._yScale.right+xValue,_meta.data[0]._yScale.bottom-yValue),chartInstance.chart.ctx.strokeStyle=colorValue,chartInstance.chart.ctx.setLineDash(dashValue),chartInstance.chart.ctx.stroke(),rectangle.legend){var baseX=_meta.data[0]._yScale.right+50+170*i,baseY=_meta.data[0]._yScale.top-30;chartInstance.chart.ctx.beginPath(),chartInstance.chart.ctx.moveTo(baseX,baseY),chartInstance.chart.ctx.lineTo(baseX+50,baseY),chartInstance.chart.ctx.strokeStyle=colorValue,chartInstance.chart.ctx.setLineDash(dashValue),chartInstance.chart.ctx.stroke(),chartInstance.chart.ctx.textAlign="left",chartInstance.chart.ctx.fillStyle=rectangle.legendColor,chartInstance.chart.ctx.fillText(rectangle.legend,baseX+60,baseY)}}if(chartInstance.options.extended.drawHorizontalLine&&chartInstance.data.datasets.length>0){if(!(iPoint=chartInstance.getDatasetMeta(chartInstance.options.extended.drawHorizontalLineDataset).data[0]))return;var _position=iPoint.tooltipPosition(),step=(iPoint._yScale.bottom-iPoint._yScale.top)/(iPoint._yScale.max-iPoint._yScale.min);chartInstance.options.extended.drawHorizontalLinePoint,iPoint._yScale.min;_position=iPoint._yScale.bottom-(chartInstance.options.extended.drawHorizontalLinePoint-iPoint._yScale.min)*step,chartInstance.chart.ctx.beginPath(),chartInstance.chart.ctx.moveTo(iPoint._xScale.left,_position),chartInstance.chart.ctx.strokeStyle="#ff0000",chartInstance.chart.ctx.setLineDash([2,5]),chartInstance.chart.ctx.lineTo(iPoint._xScale.right,_position),chartInstance.chart.ctx.stroke(),chartInstance.chart.ctx.textAlign="center",chartInstance.chart.ctx.fillStyle="#FFFFFF"}if(chartInstance.options.extended.drawCurrentPointLine&&chartInstance.data.datasets.length>0){var iPoint;if(!(iPoint=chartInstance.getDatasetMeta(0).data[chartInstance.options.extended.currentPoint]))return;var position=iPoint.tooltipPosition();chartInstance.chart.ctx.beginPath(),chartInstance.chart.ctx.moveTo(position.x,iPoint._yScale.top),chartInstance.chart.ctx.strokeStyle="#ff0000",chartInstance.chart.ctx.setLineDash([2,5]),chartInstance.chart.ctx.lineTo(position.x,iPoint._yScale.bottom),chartInstance.chart.ctx.stroke(),chartInstance.chart.ctx.textAlign="center",chartInstance.chart.ctx.fillStyle=chartInstance.options.extended.drawCurrentPointFontColor||"#FFFFFF",chartInstance.chart.ctx.fillText("HOJE",position.x,5)}}}});var app=new(function(){function Application(){(0,_classCallCheck2.default)(this,Application)}return(0,_createClass2.default)(Application,[{key:"startPageComponent",value:function(){new _dropdown.default("capture_period",this.onSelectCapturePerdiod)}},{key:"onSelectCapturePerdiod",value:function(period){var $capturePeriodFormInput=$(".js-capture-period");$capturePeriodFormInput.val()!==period&&($capturePeriodFormInput.val(period),$(".js-capture-period-form").submit())}},{key:"applyPrototypes",value:function(){Number.prototype.formatMoney=function(c,d,t){var n=this,s=(c=isNaN(c=Math.abs(c))?2:c,d=void 0===d?",":d,t=void 0===t?".":t,n<0?"-":""),i=String(parseInt(n=Math.abs(Number(n)||0).toFixed(c))),j=(j=i.length)>3?j%3:0;return s+(j?i.substr(0,j)+t:"")+i.substr(j).replace(/(\d{3})(?=\d)/g,"$1"+t)+(c?d+Math.abs(n-i).toFixed(c).slice(2):"")},String.prototype.replaceAll=function(search,replacement){return this.replace(new RegExp(search,"g"),replacement)},String.prototype.parseMoney=function(){return null===this||""===this?0:parseFloat(this.replaceAll(/\./,"").replaceAll(/,/,"."))},String.prototype.isBlank=function(){return null===this||0===this.trim().length}}}]),Application}());app.applyPrototypes(),app.startPageComponent(),window.navBar=new _navbar.default})),require.register("web/static/js/components/dropdown.js",(function(exports,require,module){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),Dropdown=function(){function Dropdown(id,onSelect){(0,_classCallCheck2.default)(this,Dropdown),this.selector="#"+id,this.onSelect=onSelect,this.updateResponsiveness(),this.setSelectedValue(this.getSelectedValue())}return(0,_createClass2.default)(Dropdown,[{key:"updateResponsiveness",value:function(){var _this=this;$(this.selector+" a").on("click",(function(e){e.preventDefault(),_this.updateSelection($(e.target))}))}},{key:"setSelectedValue",value:function(value){var selection=$(this.selector+" a[data-ref=".concat(value,"]"));selection.length>0?this.updateSelection(selection):console.log("Item not found for value: "+value)}},{key:"getSelectedValue",value:function(){return $(this.selector).attr("data-ref")}},{key:"updateSelection",value:function(element){$(this.selector+" span.flex-grow").html(element.text()),$(this.selector).attr("data-ref",element.attr("data-ref")),this.onSelect&&this.onSelect(this.getSelectedValue())}},{key:"replaceOptions",value:function(data){var dropdownList=$(this.selector+" ul");dropdownList.empty();for(var i=0,len=data.length;i<len;i++){var newElement='<li><a href="#!" data-ref="'.concat(data[i].value,'">').concat(data[i].label,"</a></li>");dropdownList.append(newElement)}this.setSelectedValue(data[0].value),this.updateResponsiveness()}}]),Dropdown}();exports.default=Dropdown})),require.register("web/static/js/components/navbar.js",(function(exports,require,module){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _classCallCheck2=_interopRequireDefault(require("@babel/runtime/helpers/classCallCheck")),_createClass2=_interopRequireDefault(require("@babel/runtime/helpers/createClass")),NavBar=function(){function NavBar(){(0,_classCallCheck2.default)(this,NavBar),this.setActiveLink(),this.fixNavBarOnScroll(),this.fixNavbarOverlapInMobile()}return(0,_createClass2.default)(NavBar,[{key:"fixNavBarOnScroll",value:function(){$(window).scroll((function(){$("body");var $navbar=$(".navbar");$(window).scrollTop()>=65?$navbar.hasClass("navbar-fixed-top")||($("header").css("visibility","hidden"),$navbar.addClass("navbar-fixed-top"),$("body").css("padding-top","64px")):$(window).scrollTop()<1&&($navbar.removeClass("navbar-fixed-top"),$("header").css("visibility","visible"),$("body").css("padding-top","0px"))}))}},{key:"fixNavbarOverlapInMobile",value:function(){$("#js-navbar-button").on("click",(function(){$(".navbar").addClass("navbar-fixed-top")}))}},{key:"setActiveLink",value:function(){$(".navbar__link, .navbar__dropdown__link").each((function(){var linkAddress=$(this).attr("href");window.location.toString().indexOf(linkAddress)>=0&&$(this).closest(".navbar__item").addClass("active")}))}}]),NavBar}();exports.default=NavBar})),require.register("web/static/js/components/vue-charts/scatter-chart.js",(function(exports,require,module){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={extends:require("vue-chartjs").Scatter,props:["data","options"],mounted:function(){this.renderChart(this.data,this.options)},methods:{updateChart:function(){this.$data._chart.destroy(),this.renderChart(this.data,this.options)}},watch:{data:{handler:function(value){this.updateChart()}}}};exports.default=_default})),require.register("web/static/js/demand-curves.js",(function(exports,require,module){"use strict";var _demandCurves=require("@babel/runtime/helpers/interopRequireDefault")(require("../templates/demand-curves")),_socket=require("./socket");require("./app");var capturePeriod=document.getElementById("capture-period").value,channelHash=document.getElementById("channel-hash").value,loaded=!1;(0,_socket.joinSingleChannel)("demand_curves:data:".concat(channelHash),"panel",(function(channel_type,channel,params){window.DemandCurvesChannel=channel,console.log("channel joined. loaded: "+loaded),loaded||(loaded=!0,window.vueApp=new Vue({el:"#app",mounted:function(){console.log("app ready")},render:function(h){return h(_demandCurves.default)}}))}),{capturePeriod:capturePeriod})})),require.register("web/static/js/logging.js",(function(exports,require,module){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var logging_level=0;function _print(message,level,prefix){level<=logging_level&&("string"==typeof message?console.log(prefix+message):console.log(prefix+JSON.stringify(message)))}var _default={DEBUG:15,INFO:10,WARN:5,ERROR:0,set_level:function(level){logging_level=level},debug:function(message){_print(message,15,"[DEBUG]: ")},info:function(message){_print(message,10,"[INFO]: ")},warn:function(message){Rollbar.warning(message),_print(message,5,"[WARN]: ")},error:function(message){_print(message,0,"[ERROR]: ")}};exports.default=_default})),require.register("web/static/js/query-string.js",(function(exports,require,module){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=_interopRequireDefault(require("lodash"));var _default={solveEntries:function(options,compareValues,field){return _lodash.default.map(compareValues,(function(valueEntry){var filteredOptions=_lodash.default.filter(options,(function(filterEntry){return filterEntry[field]==valueEntry[field]}));return filteredOptions.length>0?filteredOptions[0]:null}))},solveEntry:function(options,compareValue,field){var filteredEntry=_lodash.default.filter(options,(function(filterEntry){return filterEntry[field]==compareValue}));if(filteredEntry.length>0)return filteredEntry[0]}};exports.default=_default})),require.register("web/static/js/socket.js",(function(exports,require,module){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.joinSingleChannel=function(identification,type,callback,params){var channel=socket.channel(identification,params);channel.join().receive("ok",(function(resp){console.log("Joined successfully "+type,resp),callback(type,channel,resp)})).receive("error",(function(resp){console.log("Unable to join "+type,resp)}))},exports.socket=void 0;var _phoenix=require("phoenix"),_token=_interopRequireDefault(require("./token")),token=(_interopRequireDefault(require("./logging")),(0,_token.default)()),socket=new _phoenix.Socket("/socket",{params:{token:token}});exports.socket=socket,socket.connect()})),require.register("web/static/js/token.js",(function(exports,require,module){"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=function(){if(document.getElementById("token"))return document.getElementById("token").value}})),require.register("web/static/templates/custom-search-multiselect.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _default={data:function(){return{selectedValue:null,sugestions:[]}},components:{Multiselect:_interopRequireDefault(require("vue-multiselect")).default},props:["value","options","label","placeholder","selectLabel","deselectLabel","selectedLabel","multiple","trackBy"],watch:{options:function(value){this.sugestions=this.options},value:function(_value){this.selectedValue=_value}},mounted:function(){this.sugestions=this.options},methods:{valueSelected:function(data){var _this=this;this.$nextTick((function(){_this.$emit("select",_this.selectedValue),_this.$emit("input",_this.selectedValue)}))},valueRemoved:function(){var _this2=this;this.$nextTick((function(){_this2.$emit("remove"),_this2.$emit("input",_this2.selectedValue)}))},customSearch:function(data,id){if(""!=data){var filteredData=data.normalize("NFD").replace(/[\u0300-\u036f]/g,"");this.sugestions=this.options.filter((function(item_data){return item_data.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().includes(filteredData.toUpperCase())}))}else this.sugestions=this.options}}};exports.default=_default}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _vm=this,_h=_vm.$createElement;return(_vm._self._c||_h)("multiselect",{attrs:{"internal-search":!1,options:_vm.sugestions,label:_vm.label,placeholder:_vm.placeholder,selectLabel:_vm.selectLabel,deselectLabel:_vm.deselectLabel,selectedLabel:_vm.selectedLabel,multiple:_vm.multiple,"track-by":_vm.trackBy},on:{select:_vm.valueSelected,remove:_vm.valueRemoved,"search-change":_vm.customSearch},model:{value:_vm.selectedValue,callback:function($$v){_vm.selectedValue=$$v},expression:"selectedValue"}})},__vue__options__.staticRenderFns=[]})),require.register("web/static/templates/demand-curves.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=_interopRequireDefault(require("lodash")),_scatterChart=_interopRequireDefault(require("./scatter-chart")),_serverSideError=_interopRequireDefault(require("./server-side-error")),_serverSideWarning=_interopRequireDefault(require("./server-side-warning")),_panelFilter=_interopRequireDefault(require("./panel-filter")),_moment=_interopRequireDefault(require("moment")),_customSearchMultiselect=_interopRequireDefault(require("./custom-search-multiselect")),_vueMultiselect=_interopRequireDefault(require("vue-multiselect")),_queryString=_interopRequireDefault(require("../js/query-string")),_default={data:function(){return{loadingFilters:!0,coursesLoading:!1,movelMean:!0,dataLoading:!1,canonicalCoursesOptions:[],canonicalCourse:null,totalPoints:null,usedPoints:null,currentOfferedPrice:null,currentDemandCoverage:null,simulatedDemandCoverage:null,currentCoverage:null,currentFullPrice:null,serverWarning:!1,simulatedPrice:null,simulatedCoverage:null,currentOptimalPrice:null,calculatedOptimalDemand:null,calculatedOptimalPrice:null,calculatedSecondOptimalDemand:[],calculatedSecondOptimalPrice:[],curvePoints:null,optimizedOptions:[{id:"optimal",name:"Ponto ótimo"},{id:"custom",name:"Customizada"},{id:"none",name:"Sem simulação"}],optimizedPointType:null,optimalIndex:null,currentLocationType:null,currentLocationValue:null,hasData:!1,serverError:!1,priceSeries:[],revenueSeries:[],currentSecondCoverage:[],simulatedSecondCoverage:[],currentSecondDemandCoverage:[],simulatedSecondDemandCoverage:[],simulatedPriceSecond:[null,null,null],simulatedDiscountSecond:[],simulatedRectangleColor:"#FDB913",currentOfferedRectangleColor:"#bbbbbb",simulationDash:[15,2],offeredDash:[15,5],secondDemandData:!1,secondOptimalIndexes:[],loadingSecondDemandData:!1}},components:{ServerSideError:_serverSideError.default,PanelFilter:_panelFilter.default,ScatterChart:_scatterChart.default,CsMultiselect:_customSearchMultiselect.default,Multiselect:_vueMultiselect.default,ServerSideWarning:_serverSideWarning.default},mounted:function(){var _this=this;DemandCurvesChannel.on("serverSideError",(function(payload){return _this.handleError(payload)})),DemandCurvesChannel.on("serverWarning",(function(payload){return _this.handleWarning(payload)})),DemandCurvesChannel.on("filters",(function(payload){return _this.receiveFilters(payload)})),DemandCurvesChannel.on("demandData",(function(payload){return _this.receiveDemandData(payload)})),DemandCurvesChannel.on("demandNoData",(function(payload){return _this.receiveDemandNoData(payload)})),DemandCurvesChannel.on("loadingSecondDemandData",(function(){return _this.receiveLoadingSecondDemandData()})),DemandCurvesChannel.on("demandNoSecondData",(function(){return _this.receiveDemandNoSecondData()})),DemandCurvesChannel.on("demandData2",(function(payload){return _this.receiveDemandData(payload)})),DemandCurvesChannel.on("secondDemandDataManhaSimplificado",(function(payload){return _this.receiveSecondDemandDataManhaSimplificado(payload)})),DemandCurvesChannel.on("secondDemandDataTardeSimplificado",(function(payload){return _this.receiveSecondDemandDataTardeSimplificado(payload)})),DemandCurvesChannel.on("secondDemandDataNoiteSimplificado",(function(payload){return _this.receiveSecondDemandDataNoiteSimplificado(payload)})),DemandCurvesChannel.on("citiesFilters",(function(payload){return _this.receiveCitiesFilters(payload)})),DemandCurvesChannel.on("coursesFilters",(function(payload){return _this.receiveCoursesFilters(payload)})),this.optimizedPointType=this.optimizedOptions[0],this.loadFilters()},computed:{hasFullPrice:function(){return!_lodash.default.isNil(this.currentFullPrice)},fullTest:function(){return _lodash.default.isNil(this.currentFullPrice)},hasSimulations:function(){return!_lodash.default.isNil(this.simulatedPrice)},currentDiscount:function(){return _lodash.default.isNil(this.currentOfferedPrice)||_lodash.default.isNil(this.currentFullPrice)?null:Math.round((this.currentFullPrice-this.currentOfferedPrice)/this.currentFullPrice*100)},simulatedDiscount:function(){return _lodash.default.isNil(this.simulatedPrice)||_lodash.default.isNil(this.currentFullPrice)?null:Math.round((this.currentFullPrice-this.simulatedPrice)/this.currentFullPrice*100)},simulatedDiscount0:function(){return _lodash.default.isNil(this.simulatedPriceSecond[0])||_lodash.default.isNil(this.currentFullPrice)?null:Math.round((this.currentFullPrice-this.simulatedPriceSecond[0])/this.currentFullPrice*100)},simulatedDiscount1:function(){return _lodash.default.isNil(this.simulatedPriceSecond[1])||_lodash.default.isNil(this.currentFullPrice)?null:Math.round((this.currentFullPrice-this.simulatedPriceSecond[1])/this.currentFullPrice*100)},simulatedDiscount2:function(){return _lodash.default.isNil(this.simulatedPriceSecond[2])||_lodash.default.isNil(this.currentFullPrice)?null:Math.round((this.currentFullPrice-this.simulatedPriceSecond[2])/this.currentFullPrice*100)}},methods:{handleError:function(){this.loading=!1,this.coursesLoading=!1,this.serverError=!0,this.dataLoading=!1,this.loadingSecondDemandData=!1},handleWarning:function(){this.loading=!1,this.coursesLoading=!1,this.serverWarning=!0,this.dataLoading=!1,this.loadingSecondDemandData=!1},dumpQueryString:function(){var filter=this.getFilter();if(!_lodash.default.isNil(filter)){var queryString="?currentFilter="+JSON.stringify(filter.currentFilter);window.history.pushState("","",window.location.pathname+queryString)}},parseQueryString:function(){var _this2=this,hasFilter=!1,currentFilter=new URLSearchParams(window.location.search).get("currentFilter");_lodash.default.isNil(currentFilter)||(currentFilter=JSON.parse(currentFilter),this.$refs.currentFilter.setFiltersData(currentFilter),_lodash.default.isNil(currentFilter.canonicalCourse)||(this.canonicalCourse=_queryString.default.solveEntry(this.canonicalCoursesOptions,currentFilter.canonicalCourse.id,"id")),hasFilter=!0),hasFilter&&this.$nextTick((function(){_this2.loadData()}))},exportData:function(){var zipped=_lodash.default.zip(this.priceSeries,this.revenueSeries),filename="curva_demanda_"+(0,_moment.default)().format("MM_DD_YYYY_hh_mm_ss_a")+".csv",content="% Demanda;Preço;% Receita\n";_lodash.default.each(zipped,(function(entry){content=content+entry[0].x+";"+entry[0].y+";"+entry[1].y+"\n"}));var blob=new Blob([content],{type:"text/plain;charset=utf-8"});saveAs(blob,filename)},setChartRectangles:function(chart,chartIndex){console.log("setChartRectangles: "+chartIndex+" TYPE: "+this.optimizedPointType.id+" CURR_OFFERED: "+this.currentOfferedPrice);var curveRects=[],currentOfferedPoint=chart.solvePlotData({y:this.currentOfferedPrice},0);if("custom"==this.optimizedPointType.id){var currentOptimalPoint=chart.solvePlotData({y:this.currentOptimalPrice},0),coverage={x:currentOptimalPoint.x},currentCoveragePoint=chart.solvePlotData(coverage,1);this.$set(this.simulatedSecondCoverage,chartIndex,currentCoveragePoint.y.toFixed(1)),this.$set(this.simulatedSecondDemandCoverage,chartIndex,currentCoveragePoint.x.toFixed(1)),curveRects.push({x:0,y:0,to_scale_point:currentOptimalPoint,color:this.simulatedRectangleColor,dash:this.simulationDash,legend:"Preço simulado"})}if("optimal"==this.optimizedPointType.id&&(this.$set(this.simulatedSecondCoverage,chartIndex,100),this.$set(this.simulatedSecondDemandCoverage,chartIndex,this.calculatedSecondOptimalDemand[chartIndex]),this.$set(this.simulatedPriceSecond,chartIndex,this.calculatedSecondOptimalPrice[chartIndex]),curveRects.push({x:0,y:0,to_point:{dataset:0,index:this.secondOptimalIndexes[chartIndex]-1},color:this.simulatedRectangleColor,dash:this.simulationDash,legend:"Preço simulado",legendColor:"#FFFFFF"})),!_lodash.default.isNil(this.currentOfferedPrice)){var currenteCoveragePoint=chart.solvePlotData({x:currentOfferedPoint.x},1);this.$set(this.currentSecondCoverage,chartIndex,currenteCoveragePoint.y.toFixed(1)),this.$set(this.currentSecondDemandCoverage,chartIndex,currenteCoveragePoint.x.toFixed(1)),curveRects.push({x:0,y:0,to_scale_point:currentOfferedPoint,color:this.currentOfferedRectangleColor,dash:this.offeredDash,legend:"Preço médio no site",legendColor:"#FFFFFF"})}chart.setRectangles(curveRects),chart.updateChart()},setRectangles:function(){var curveRects=[];console.log("Curr off price: ",this.currentOfferedPrice);var currentOfferedPoint=this.$refs.demandCurveChart.solvePlotData({y:this.currentOfferedPrice},0);if("custom"==this.optimizedPointType.id){var currentOptimalPoint=this.$refs.demandCurveChart.solvePlotData({y:this.currentOptimalPrice},0),coverage={x:currentOptimalPoint.x},currentCoveragePoint=this.$refs.demandCurveChart.solvePlotData(coverage,1);this.simulatedCoverage=currentCoveragePoint.y.toFixed(1),this.simulatedDemandCoverage=currentCoveragePoint.x.toFixed(1),curveRects.push({x:0,y:0,to_scale_point:currentOptimalPoint,color:this.simulatedRectangleColor,dash:this.simulationDash,legend:"Preço simulado"})}if("optimal"==this.optimizedPointType.id&&(this.simulatedCoverage=100,this.simulatedDemandCoverage=this.calculatedOptimalDemand,this.simulatedPrice=this.calculatedOptimalPrice,curveRects.push({x:0,y:0,to_point:{dataset:0,index:this.optimalIndex-1},color:this.simulatedRectangleColor,dash:this.simulationDash,legend:"Preço simulado",legendColor:"#FFFFFF"})),!_lodash.default.isNil(this.currentOfferedPrice)&&!_lodash.default.isNil(currentOfferedPoint.x)){var currenteCoveragePoint=this.$refs.demandCurveChart.solvePlotData({x:currentOfferedPoint.x},1);this.currentCoverage=currenteCoveragePoint.y.toFixed(1),this.currentDemandCoverage=currenteCoveragePoint.x.toFixed(1),curveRects.push({x:0,y:0,to_scale_point:currentOfferedPoint,color:this.currentOfferedRectangleColor,dash:this.offeredDash,legend:"Preço médio no site",legendColor:"#FFFFFF"})}this.$refs.demandCurveChart.setRectangles(curveRects),this.$refs.demandCurveChart.updateChart()},setOptimalOffered:function(){console.log("setOptimalOffered# currentOfferedPrice: "+this.currentOptimalPrice),this.simulatedPrice=this.currentOptimalPrice,this.simulatedPriceSecond[0]=this.currentOptimalPrice,this.simulatedPriceSecond[1]=this.currentOptimalPrice,this.simulatedPriceSecond[2]=this.currentOptimalPrice,this.setRectangles(),this.setChartRectangles(this.$refs.secondDemandCurveManhaSimplificado,0),this.setChartRectangles(this.$refs.secondDemandCurveTardeSimplificado,1),this.setChartRectangles(this.$refs.secondDemandCurveNoiteSimplificado,2),this.updateCharts()},optimizedSelected:function(data){console.log("optimizedSelected: "+JSON.stringify(data)),"optimal"!=data.id&&"none"!=data.id||("none"==data.id&&(this.currentOptimalPrice=null,this.simulatedPrice=null,this.simulatedPriceSecond[0]=null,this.simulatedPriceSecond[1]=null,this.simulatedPriceSecond[2]=null),this.setRectangles(),this.setChartRectangles(this.$refs.secondDemandCurveManhaSimplificado,0),this.setChartRectangles(this.$refs.secondDemandCurveTardeSimplificado,1),this.setChartRectangles(this.$refs.secondDemandCurveNoiteSimplificado,2),this.updateCharts())},updateCharts:function(){var _this3=this;this.$nextTick((function(){_this3.$refs.demandCurveChart.updateChart(),_this3.$refs.secondDemandCurveManhaSimplificado.updateChart(),_this3.$refs.secondDemandCurveTardeSimplificado.updateChart(),_this3.$refs.secondDemandCurveNoiteSimplificado.updateChart()}))},currentPrimarySelected:function(){var _this4=this;console.log("currentPrimarySelected"),this.$nextTick((function(){_this4.completeCourses()}))},currentLocationTypeSelected:function(data){if(!_lodash.default.isNil(data)&&(console.log("currentLocationTypeSelected "+data.type),this.currentLocationType=data.type,"city"==data.type)){var currentFilter=this.$refs.currentFilter.filterData(!0);currentFilter||(console.log("current filter vazio"),currentFilter={}),currentFilter.canonicalCourse=this.canonicalCourse;var filter={currentFilter:currentFilter};this.$refs.currentFilter.setCitiesLoading(),DemandCurvesChannel.push("completeCities",filter).receive("timeout",(function(data){console.log("completeCities timeout")}))}},completeCourses:function(){console.log("completeCourses");var currentFilter=this.$refs.currentFilter.filterData(!0);if(currentFilter){var filter={currentFilter:currentFilter};DemandCurvesChannel.push("completeCourses",filter).receive("timeout",(function(data){console.log("completeCourses timeout")}))}else currentFilter={}},currentLocationSelected:function(type,value){console.log("currentLocationSelected: "+JSON.stringify(type)+" value: "+JSON.stringify(value)),this.currentLocationValue=value},currentRangeSelected:function(){console.log("currentRangeSelected")},currentKindSelected:function(){console.log("currentKindSelected")},currentLevelSelected:function(){console.log("currentLevelSelected")},receiveDemandNoData:function(data){this.dataLoading=!1,this.totalPoints=0,this.usedPoints=0,alert("Sem pontos para traçar")},receiveDemandNoSecondData:function(){this.loadingSecondDemandData=!1},receiveLoadingSecondDemandData:function(){this.loadingSecondDemandData=!0},solveSimulatedPrice:function(input,max_index,chart_index){this.calculatedSecondOptimalPrice[chart_index]=input[max_index-1].y,this.calculatedSecondOptimalDemand[chart_index]=input[max_index-1].x,this.simulatedPriceSecond[chart_index]=this.calculatedSecondOptimalPrice[chart_index],this.simulatedSecondCoverage[chart_index]=100},receiveSecondDemandDataTardeSimplificado:function(data){var _this5=this;this.secondDemandData=!0,this.$refs.secondDemandCurveTardeSimplificado.setXAxisTitle(0,"Demanda capturada (%)"),this.$refs.secondDemandCurveTardeSimplificado.setYAxisTitle(0,"Preço (R$)"),this.$refs.secondDemandCurveTardeSimplificado.setYAxisTitle(1,"Receita (%)"),this.$refs.secondDemandCurveTardeSimplificado.setSeries(0,data.offered,"Preco oferecido"),this.$refs.secondDemandCurveTardeSimplificado.setSeries(1,data.revenue,"Receita esperada"),this.secondOptimalIndexes[1]=data.max_index,this.solveSimulatedPrice(data.offered,data.max_index,1),this.setChartRectangles(this.$refs.secondDemandCurveTardeSimplificado,1),this.$nextTick((function(){_this5.$refs.secondDemandCurveTardeSimplificado.updateChart()}))},receiveSecondDemandDataNoiteSimplificado:function(data){var _this6=this;this.secondDemandData=!0,this.$refs.secondDemandCurveNoiteSimplificado.setXAxisTitle(0,"Demanda capturada (%)"),this.$refs.secondDemandCurveNoiteSimplificado.setYAxisTitle(0,"Preço (R$)"),this.$refs.secondDemandCurveNoiteSimplificado.setYAxisTitle(1,"Receita (%)"),this.$refs.secondDemandCurveNoiteSimplificado.setSeries(0,data.offered,"Preco oferecido"),this.$refs.secondDemandCurveNoiteSimplificado.setSeries(1,data.revenue,"Receita esperada"),this.secondOptimalIndexes[2]=data.max_index,this.solveSimulatedPrice(data.offered,data.max_index,2),this.setChartRectangles(this.$refs.secondDemandCurveNoiteSimplificado,2),this.$nextTick((function(){_this6.$refs.secondDemandCurveNoiteSimplificado.updateChart()}))},receiveSecondDemandDataManhaSimplificado:function(data){var _this7=this;this.loadingSecondDemandData=!1,this.secondDemandData=!0,this.$refs.secondDemandCurveManhaSimplificado.setXAxisTitle(0,"Demanda capturada (%)"),this.$refs.secondDemandCurveManhaSimplificado.setYAxisTitle(0,"Preço (R$)"),this.$refs.secondDemandCurveManhaSimplificado.setYAxisTitle(1,"Receita (%)"),this.$refs.secondDemandCurveManhaSimplificado.setSeries(0,data.offered,"Preco oferecido"),this.$refs.secondDemandCurveManhaSimplificado.setSeries(1,data.revenue,"Receita esperada"),this.secondOptimalIndexes[0]=data.max_index,this.solveSimulatedPrice(data.offered,data.max_index,0),this.setChartRectangles(this.$refs.secondDemandCurveManhaSimplificado,0),this.$nextTick((function(){_this7.$refs.secondDemandCurveManhaSimplificado.updateChart()}))},receiveDemandData:function receiveDemandData(data){_lodash.default.isNil(data.current_offered)||(this.currentOfferedPrice=eval(data.current_offered).toFixed(2)),_lodash.default.isNil(data.current_full)||""==data.current_full||(this.currentFullPrice=eval(data.current_full).toFixed(2)),this.optimalIndex=data.max_index,this.curvePoints=data.points_count,this.calculatedOptimalPrice=data.offered[data.max_index-1].y,this.calculatedOptimalDemand=data.offered[data.max_index-1].x,this.simulatedPrice=this.calculatedOptimalPrice,this.simulatedCoverage=100,this.$refs.demandCurveChart.setXAxisTitle(0,"Demanda capturada (%)"),this.$refs.demandCurveChart.setYAxisTitle(0,"Preço (R$)"),this.$refs.demandCurveChart.setYAxisTitle(1,"Receita (%)"),this.$refs.demandCurveChart.setSeries(0,data.offered,"Preco oferecido"),this.$refs.demandCurveChart.setSeries(1,data.revenue,"Receita esperada"),this.priceSeries=data.offered,this.revenueSeries=data.revenue,this.setRectangles(),this.$refs.demandCurveChart.updateChart(),this.dataLoading=!1,this.hasData=!0},receiveCitiesFilters:function(data){this.$refs.currentFilter.setCities(data.cities)},receiveCoursesFilters:function(data){this.coursesLoading=!0,this.canonicalCoursesOptions=data.courses,this.coursesLoading=!1},receiveFilters:function(data){console.log("receiveFilters"),this.$refs.currentFilter.setLevels(data.levels),this.$refs.currentFilter.setKinds(data.kinds),this.$refs.currentFilter.setLocations(data.locationTypes),this.$refs.currentFilter.setGroups(data.groupTypes),this.$refs.currentFilter.setAccountTypes(data.accountTypes),this.$refs.currentFilter.setUniversities(data.universities),this.$refs.currentFilter.setUniversityGroups(data.groups),this.$refs.currentFilter.setSemesterRange((0,_moment.default)().subtract(6,"months").toDate(),(0,_moment.default)().toDate()),this.$refs.currentFilter.setDealOwners(data.dealOwners),this.$refs.currentFilter.setQualityOwners(data.qualityOwners),this.$refs.currentFilter.setRegions(data.regions),this.$refs.currentFilter.setStates(data.states),this.$refs.currentFilter.setCities([]),this.$refs.currentFilter.setCampus([]),this.baseCanonicalCoursesOptions=data.courses,this.canonicalCoursesOptions=data.courses,this.loadingFilters=!1,this.parseQueryString()},loadFilters:function(){DemandCurvesChannel.push("loadFilters").receive("timeout",(function(data){console.log("filters timeout")}))},getFilter:function(){var currentFilter=this.$refs.currentFilter.filterData();if(currentFilter)return currentFilter.canonicalCourse=this.canonicalCourse,{currentFilter:currentFilter};console.log("currentFilter vazio")},loadData:function(){var filter=this.getFilter();this.serverError=!1,this.serverWarning=!1,filter&&(this.curvePoints=null,this.currentOfferedPrice=null,this.optimizedPointType=this.optimizedOptions[0],this.simulatedPrice=null,this.currentFullPrice=null,this.$refs.demandCurveChart.clearSeries(),this.$refs.secondDemandCurveManhaSimplificado.clearSeries(),this.$refs.secondDemandCurveTardeSimplificado.clearSeries(),this.$refs.secondDemandCurveNoiteSimplificado.clearSeries(),this.dataLoading=!0,this.totalPoints=null,this.usedPoints=null,this.hasData=!1,this.secondDemandData=!1,DemandCurvesChannel.push("loadData",filter).receive("timeout",(function(data){console.log("loadData timeout")})),this.dumpQueryString())}}};exports.default=_default}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"container-fluid"},[_vm._m(0),_vm._v(" "),_c("div",{staticClass:"row"},[_vm.loadingFilters||_vm.dataLoading?_c("div",{staticClass:"transparent-loader"},[_c("div",{staticClass:"loader"})]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"panel panel-default"},[_vm.serverError?_c("server-side-error"):_vm._e(),_vm._v(" "),_vm.serverWarning?_c("server-side-warning",{attrs:{message:"Não há dados para o filtro escolhido"}}):_vm._e(),_vm._v(" "),_c("div",{staticClass:"panel-body no-lat-padding"},[_c("panel-filter",{ref:"currentFilter",attrs:{"period-disabled":!1,index:"0"},on:{primaryFilterSelected:_vm.currentPrimarySelected,locationTypeSelected:_vm.currentLocationTypeSelected,locationSelected:_vm.currentLocationSelected,timeRangeSelected:_vm.currentRangeSelected,kindSelected:_vm.currentKindSelected,levelSelected:_vm.currentLevelSelected}}),_vm._v(" "),_c("div",{staticClass:"row"},[_vm.coursesLoading?_c("div",{staticClass:"transparent-loader"},[_c("div",{staticClass:"loader"})]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("CURSO")]),_vm._v(" "),_c("cs-multiselect",{attrs:{options:_vm.canonicalCoursesOptions,label:"name",placeholder:"Todos os cursos",selectLabel:"Enter para selecionar",deselectLabel:""},model:{value:_vm.canonicalCourse,callback:function($$v){_vm.canonicalCourse=$$v},expression:"canonicalCourse"}})],1)])]),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-6 col-sm-12"},[_c("div",{staticClass:"default-margin-top flex-vertical-centered"},[_c("button",{staticClass:"btn-submit",on:{click:_vm.loadData}},[_vm._v("\n                  Atualizar\n                ")]),_vm._v(" "),_vm.hasData?_c("div",{staticClass:"default-margin-left"},[_c("div",{staticClass:"dropdown",on:{click:_vm.exportData}},[_vm._m(1)])]):_vm._e()])])])],1)],1)])]),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"panel report-panel panel-default"},[_vm.simulatedPrice||_vm.currentOfferedPrice?_c("div",{staticStyle:{float:"right"}},[_c("table",{staticClass:"data-table data-table-tiny"},[_c("thead",[_c("tr",[_c("th"),_vm._v(" "),_vm.currentOfferedPrice?_c("th",[_vm._v("Atual")]):_vm._e(),_vm._v(" "),_vm.simulatedPrice?_c("th",[_vm._v("Simulação")]):_vm._e()])]),_vm._v(" "),_c("tbody",[_c("tr",[_c("td",[_vm._v("Preço cheio")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                    R$ "+_vm._s(_vm.currentFullPrice)+"\n                  ")]:[_vm._v("\n                    -\n                  ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                    R$ "+_vm._s(_vm.currentFullPrice)+"\n                  ")]:[_vm._v("\n                    -\n                  ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Preço com desconto")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v("R$ "+_vm._s(_vm.currentOfferedPrice))]):_vm._e(),_vm._v(" "),_vm.simulatedPrice?_c("td",[_vm._v("R$ "+_vm._s(_vm.simulatedPrice))]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Desconto (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                    "+_vm._s(_vm.currentDiscount)+"%\n                  ")]:[_vm._v("\n                    -\n                  ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                    "+_vm._s(_vm.simulatedDiscount)+"%\n                  ")]:[_vm._v("\n                    -\n                  ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Receita ótima (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentCoverage)+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPrice?_c("td",[_vm._v(_vm._s(_vm.simulatedCoverage)+"%")]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Demanda capturada (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentDemandCoverage)+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPrice?_c("td",[_vm._v(_vm._s(_vm.simulatedDemandCoverage)+"%")]):_vm._e()])])])]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"panel-heading panel-heading--spaced-bottom"},[_vm._v("\n          CURVA DE DEMANDA ( PRIMEIRA GERAÇÃO )\n          "),_vm.curvePoints?_c("p",[_vm._v("Número de pontos: "+_vm._s(_vm.curvePoints))]):_vm._e(),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-3"},[_c("label",{attrs:{for:""}},[_vm._v("SIMULAÇÃO")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.optimizedOptions,label:"name","track-by":"id",placeholder:"Selecione o tipo",selectLabel:"",deselectLabel:"","allow-empty":!1},on:{input:_vm.optimizedSelected},model:{value:_vm.optimizedPointType,callback:function($$v){_vm.optimizedPointType=$$v},expression:"optimizedPointType"}})],1),_vm._v(" "),_vm.optimizedPointType&&"custom"==_vm.optimizedPointType.id?[_c("div",{staticClass:"col-md-3"},[_c("label",{attrs:{for:""}},[_vm._v("VALOR")]),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.currentOptimalPrice,expression:"currentOptimalPrice"}],staticClass:"multiselect__input",staticStyle:{color:"#000000",height:"40px"},attrs:{type:"text"},domProps:{value:_vm.currentOptimalPrice},on:{input:function($event){$event.target.composing||(_vm.currentOptimalPrice=$event.target.value)}}})]),_vm._v(" "),_c("div",{staticClass:"col-md-3"},[_c("button",{staticClass:"btn-submit",staticStyle:{"margin-top":"25px"},on:{click:_vm.setOptimalOffered}},[_vm._v("\n                  Setar\n                ")])])]:_vm._e(),_vm._v(" "),_c("div",{staticClass:"col-md-3"})],2)]),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("scatter-chart",{ref:"demandCurveChart",attrs:{"export-name":"curva_de_demanda","base-height":600}})],1)])])])])])]),_vm._v(" "),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.secondDemandData||_vm.loadingSecondDemandData,expression:"secondDemandData || loadingSecondDemandData"}]},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"row"},[_vm.loadingSecondDemandData?_c("div",{staticClass:"transparent-loader"},[_c("div",{staticClass:"loader"})]):_vm._e()]),_vm._v(" "),_vm._m(2)])]),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"panel report-panel panel-default"},[_vm.simulatedPriceSecond[0]||_vm.currentOfferedPrice?_c("div",{staticStyle:{float:"right"}},[_c("table",{staticClass:"data-table data-table-tiny"},[_c("thead",[_c("tr",[_c("th"),_vm._v(" "),_vm.currentOfferedPrice?_c("th",[_vm._v("Atual")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[0]?_c("th",[_vm._v("Simulação")]):_vm._e()])]),_vm._v(" "),_c("tbody",[_c("tr",[_c("td",[_vm._v("Preço cheio")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        R$ "+_vm._s(_vm.currentFullPrice)+"\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[0]?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        R$ "+_vm._s(_vm.currentFullPrice)+"\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Preço com desconto")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v("R$ "+_vm._s(_vm.currentOfferedPrice))]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[0]?_c("td",[_vm._v("R$ "+_vm._s(_vm.simulatedPriceSecond[0]))]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Desconto (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        "+_vm._s(_vm.currentDiscount)+"%\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[0]?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        "+_vm._s(_vm.simulatedDiscount0)+"%\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Receita ótima (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentSecondCoverage[0])+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[0]?_c("td",[_vm._v(_vm._s(_vm.simulatedSecondCoverage[0])+"%")]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Demanda capturada (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentSecondDemandCoverage[0])+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[0]?_c("td",[_vm._v(_vm._s(_vm.simulatedSecondDemandCoverage[0])+"%")]):_vm._e()])])])]):_vm._e(),_vm._v(" "),_vm._m(3),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("scatter-chart",{ref:"secondDemandCurveManhaSimplificado",attrs:{"export-name":"curva_de_demanda_segunda_geracao","base-height":600}})],1)])])])])])]),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"panel report-panel panel-default"},[_vm.simulatedPriceSecond[1]||_vm.currentOfferedPrice?_c("div",{staticStyle:{float:"right"}},[_c("table",{staticClass:"data-table data-table-tiny"},[_c("thead",[_c("tr",[_c("th"),_vm._v(" "),_vm.currentOfferedPrice?_c("th",[_vm._v("Atual")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[1]?_c("th",[_vm._v("Simulação")]):_vm._e()])]),_vm._v(" "),_c("tbody",[_c("tr",[_c("td",[_vm._v("Preço cheio")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        R$ "+_vm._s(_vm.currentFullPrice)+"\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[1]?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        R$ "+_vm._s(_vm.currentFullPrice)+"\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Preço com desconto")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v("R$ "+_vm._s(_vm.currentOfferedPrice))]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[1]?_c("td",[_vm._v("R$ "+_vm._s(_vm.simulatedPriceSecond[1]))]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Desconto (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        "+_vm._s(_vm.currentDiscount)+"%\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[1]?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        "+_vm._s(_vm.simulatedDiscount1)+"%\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Receita ótima (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentSecondCoverage[1])+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[1]?_c("td",[_vm._v(_vm._s(_vm.simulatedSecondCoverage[1])+"%")]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Demanda capturada (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentSecondDemandCoverage[1])+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[1]?_c("td",[_vm._v(_vm._s(_vm.simulatedSecondDemandCoverage[1])+"%")]):_vm._e()])])])]):_vm._e(),_vm._v(" "),_vm._m(4),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("scatter-chart",{ref:"secondDemandCurveTardeSimplificado",attrs:{"export-name":"curva_de_demanda_segunda_geracao","base-height":600}})],1)])])])])])]),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"panel report-panel panel-default"},[_vm.simulatedPriceSecond[2]||_vm.currentOfferedPrice?_c("div",{staticStyle:{float:"right"}},[_c("table",{staticClass:"data-table data-table-tiny"},[_c("thead",[_c("tr",[_c("th"),_vm._v(" "),_vm.currentOfferedPrice?_c("th",[_vm._v("Atual")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[2]?_c("th",[_vm._v("Simulação")]):_vm._e()])]),_vm._v(" "),_c("tbody",[_c("tr",[_c("td",[_vm._v("Preço cheio")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        R$ "+_vm._s(_vm.currentFullPrice)+"\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[2]?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        R$ "+_vm._s(_vm.currentFullPrice)+"\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Preço com desconto")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v("R$ "+_vm._s(_vm.currentOfferedPrice))]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[2]?_c("td",[_vm._v("R$ "+_vm._s(_vm.simulatedPriceSecond[2]))]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Desconto (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        "+_vm._s(_vm.currentDiscount)+"%\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[2]?_c("td",[_vm.hasFullPrice?[_vm._v("\n                        "+_vm._s(_vm.simulatedDiscount2)+"%\n                      ")]:[_vm._v("\n                        -\n                      ")]],2):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Receita ótima (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentSecondCoverage[2])+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[2]?_c("td",[_vm._v(_vm._s(_vm.simulatedSecondCoverage[2])+"%")]):_vm._e()]),_vm._v(" "),_c("tr",[_c("td",[_vm._v("Demanda capturada (%)")]),_vm._v(" "),_vm.currentOfferedPrice?_c("td",[_vm._v(_vm._s(_vm.currentSecondDemandCoverage[2])+"%")]):_vm._e(),_vm._v(" "),_vm.simulatedPriceSecond[2]?_c("td",[_vm._v(_vm._s(_vm.simulatedSecondDemandCoverage[2])+"%")]):_vm._e()])])])]):_vm._e(),_vm._v(" "),_vm._m(5),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12 col-sm-12"},[_c("scatter-chart",{ref:"secondDemandCurveNoiteSimplificado",attrs:{"export-name":"curva_de_demanda_segunda_geracao","base-height":600}})],1)])])])])])])])])},__vue__options__.staticRenderFns=[function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"row"},[_c("div",{staticClass:"col-12"},[_c("h2",{staticClass:"content-header"},[this._v("\n        Curvas de demanda\n      ")])])])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"dropdown-toggle"},[_c("span",{staticClass:"flex-grow dropdown-label"},[this._v("Exportar Tabela")])])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"panel report-panel panel-default"},[_c("div",{staticClass:"panel-heading panel-heading--spaced-bottom"},[this._v("\n            CURVAS DE SEGUNDA GERAÇAO\n          ")])])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"panel-heading panel-heading--spaced-bottom"},[this._v("\n            MANHÃ\n\n            "),_c("div",{staticClass:"row"})])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"panel-heading panel-heading--spaced-bottom"},[this._v("\n            TARDE\n\n            "),_c("div",{staticClass:"row"})])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"panel-heading panel-heading--spaced-bottom"},[this._v("\n            NOITE\n\n            "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-3"})])])}]})),require.register("web/static/templates/panel-filter.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _typeof2=_interopRequireDefault(require("@babel/runtime/helpers/typeof")),_lodash=_interopRequireDefault(require("lodash")),_moment=_interopRequireDefault(require("moment")),_vue2Datepicker=_interopRequireDefault(require("vue2-datepicker")),_vueMultiselect=_interopRequireDefault(require("vue-multiselect")),_customSearchMultiselect=_interopRequireDefault(require("./custom-search-multiselect")),_panelPrimaryFilter=_interopRequireDefault(require("./panel-primary-filter")),_queryString=_interopRequireDefault(require("../js/query-string")),_default={data:function(){var _this=this;return{shortcuts:[{text:"<< 6 m",onClick:function(){_this.dateRange=[(0,_moment.default)(_this.semesterStart).subtract(6,"months").toDate(),(0,_moment.default)(_this.semesterEnd).subtract(6,"months")],_this.timeRangeSelected(_this.dateRange)}},{text:"Semestre",onClick:function(){_this.dateRange=[_this.semesterStart,_this.semesterEnd],_this.timeRangeSelected(_this.dateRange)}},{text:"Últimos 30",onClick:function(){_this.dateRange=[(0,_moment.default)().subtract(31,"days").toDate(),(0,_moment.default)().subtract(1,"days").toDate()],_this.timeRangeSelected(_this.dateRange)}},{text:"Últimos 7",onClick:function(){console.log("START: "+(0,_moment.default)().subtract(8,"days").startOf("day").toDate()),_this.dateRange=[(0,_moment.default)().subtract(8,"days").startOf("day").toDate(),(0,_moment.default)().subtract(1,"days").startOf("day").toDate()],_this.timeRangeSelected(_this.dateRange)}},{text:"<< 7 d",onClick:function(){_this.dateRange=[(0,_moment.default)(_this.dateRange[0]).subtract(7,"days").toDate(),_this.dateRange[0]],_this.timeRangeSelected(_this.dateRange)}},{text:"Até hoje",onClick:function(){_this.dateRange=[_this.dateRange[0],(0,_moment.default)().toDate()],_this.timeRangeSelected(_this.dateRange)}}],lang:{days:["Dom","Seg","Ter","Qua","Qui","Sex","Sab"],months:["Jan","Fev","Mar","Abr","Mai","Jun","Jul","Ago","Set","Out","Nov","Dez"],placeholder:{date:"Data",dateRange:"Período"}},kindOptions:[],levelOptions:[],locationOptions:[],groupOptions:[],universityOptions:[],farmRegionOptions:[],universityGroupOptions:[],dealOwnerOptions:[],qualityOwnerOptions:[],accountTypeOptions:[],regionsOptions:[],statesOptions:[],citiesOptions:[],campusOptions:[],productLineOptions:[],citiesSugestions:[],filterIndex:1,filters:[],dateRange:"",filterKinds:[],filterLevels:[],locationType:"",locationRegion:"",locationState:"",locationCity:"",locationCampus:"",groupType:"",universityFilter:"",universityGroupFilter:"",accountTypeFilter:"",dealOwnerFilter:"",filterProductLine:null,cityFilterLoading:!1,campusFilterLoading:!1,productLineSelectionType:"product_line"}},props:["index","periodDisabled","filterDisabled"],components:{DatePicker:_vue2Datepicker.default,Multiselect:_vueMultiselect.default,PanelPrimaryFilter:_panelPrimaryFilter.default,CsMultiselect:_customSearchMultiselect.default},watch:{citiesOptions:function(value){this.citiesSugestions=this.citiesOptions},productLineSelectionType:function(value){var _this2=this;this.$nextTick((function(){_this2.$emit("productLineSelectionTypeSelected",_this2.productLineSelectionType)}))}},computed:{showProductLineSelection:function(){return"product_line"==this.productLineSelectionType},showKindAndLevelSelection:function(){return"kind_and_level"==this.productLineSelectionType||0==this.productLineOptions.length},hasProductLineOptions:function(){return this.productLineOptions.length>0},regionFilter:function(){return!!this.locationType&&"region"==this.locationType.type},stateFilter:function(){return!!this.locationType&&"state"==this.locationType.type},cityFilter:function(){return!!this.locationType&&"city"==this.locationType.type},campusFilter:function(){return!!this.locationType&&"campus"==this.locationType.type}},methods:{citySearch:function(data,id){if(""!=data){var filteredData=data.normalize("NFD").replace(/[\u0300-\u036f]/g,"");this.citiesSugestions=this.citiesOptions.filter((function(item_data){return item_data.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().includes(filteredData.toUpperCase())}))}else this.citiesSugestions=this.citiesOptions},kindValueSelected:function(data){var _this3=this;this.$nextTick((function(){_this3.$emit("kindSelected",_this3.filterKinds)}))},levelValueSelected:function(data){var _this4=this;this.$nextTick((function(){_this4.$emit("levelSelected",_this4.filterLevels)}))},productLineSelected:function(data){var _this5=this;this.$nextTick((function(){_this5.$emit("productLineSelected",_this5.filterProductLine)}))},timeRangeSelected:function(data){this.$emit("timeRangeSelected",data)},primaryFilterSelected:function(data){var _this6=this;console.log("primaryFilterSelected"),this.$nextTick((function(){_this6.$emit("primaryFilterSelected",_this6.baseFiltersList())}))},addFilter:function(){this.filters.push(this.filterIndex),this.filterIndex=this.filterIndex+1},removeFilter:function(index){this.filters.splice(this.filters.indexOf(index),1)},locationValueRemoved:function(){var _this7=this;this.$nextTick((function(){console.log("locationValueRemoved# TYPE: "+JSON.stringify(_this7.locationType)+" VAL: "+JSON.stringify(_this7.locationValue())),_this7.$emit("locationRemoved",_this7.locationType,_this7.locationValue())}))},locationValueSelected:function(){var _this8=this;this.$nextTick((function(){_this8.$emit("locationSelected",_this8.locationType,_this8.locationValue())}))},locationTypeSelected:function(data){var _this9=this;console.log("locationTypeSelected# "+JSON.stringify(data)),this.$nextTick((function(){_this9.$emit("locationTypeSelected",_this9.locationType,_this9.index)}))},getLocationType:function(){return this.locationType},locationValue:function(){if(this.locationType){var locationType=this.locationType.type;if("region"==locationType)return this.locationRegion;if("state"==locationType)return this.locationState;if("city"==locationType)return this.locationCity;if("campus"==locationType)return this.locationCampus}},verifyBaseFilters:function(baseFilters,omitValidation){if(0==baseFilters.length)return omitValidation||alert("Selecione pelo menos um filtro"),!1;for(var i=0;i<baseFilters.length;i++){var temDimensao=!1;if(_lodash.default.isNil(baseFilters[i].value)||_lodash.default.isNil(baseFilters[i].value.length)||(temDimensao=!0),""!=baseFilters[i].type)if(temDimensao){if(0==baseFilters[i].value.length)return omitValidation||alert("Selecione o valor para o filtro ".concat(baseFilters[i].name)),!1}else{if(!baseFilters[i].value)return omitValidation||alert("Selecione o valor para o filtro ".concat(baseFilters[i].name)),!1;if(!baseFilters[i].value.id)return omitValidation||alert("Selecione o valor para o filtro ".concat(baseFilters[i].name)),!1}}return!0},verifyFilters:function(omitValidation){if(omitValidation)return!0;if(""===this.dateRange||_lodash.default.isNil(this.dateRange))return omitValidation||alert("Preencha o período"),!1;if("Invalid Date"==this.dateRange[0]||_lodash.default.isNil(this.dateRange[0]))return omitValidation||alert("Insira um período válido"),!1;if(this.locationType)if("region"==this.locationType.type){if(""==this.locationRegion)return omitValidation?console.log("SEM REGIAO"):alert("Selecione a região"),!1}else if("state"==this.locationType.type){if(""==this.locationState)return omitValidation||alert("Selecione o estado"),!1}else if("city"==this.locationType.type){if(""==this.locationCity)return omitValidation?console.log("SEM CIDADE"):alert("Selecione a cidade"),!1}else if("campus"==this.locationType.type&&""==this.locationCampus)return omitValidation||alert("Selecione o campus"),!1;return!0},setCitiesLoading:function(){this.cityFilterLoading=!0},setCampusLoading:function(){this.campusFilterLoading=!0},setLevels:function(data){this.levelOptions=data},setKinds:function(data){this.kindOptions=data},setLocations:function(data){this.locationOptions=data},setGroups:function(data){this.groupOptions=data},setAccountTypes:function(data){this.accountTypeOptions=data},setUniversities:function(data){this.universityOptions=data},setFarmRegions:function(data){this.farmRegionOptions=data},setUniversityGroups:function(data){this.universityGroupOptions=data},setSemesterRange:function(startDate,endDate){this.semesterStart=startDate,this.semesterEnd=endDate,this.dateRange=[this.semesterStart,this.semesterEnd]},setDealOwners:function(data){this.dealOwnerOptions=data},setQualityOwners:function(data){this.qualityOwnerOptions=data},setRegions:function(data){this.regionsOptions=data},setStates:function(data){this.statesOptions=data},setCities:function(data){this.citiesOptions=data,this.cityFilterLoading=!1},setCampus:function(data){this.campusOptions=data,this.campusFilterLoading=!1},setProductLines:function(data){this.productLineOptions=data},clearPrimaryFilters:function(){for(;this.filters.length>0;)this.filters.splice(0,1);this.$refs.filter.setFilterType({type:""})},setPrimaryFilters:function(data){console.log("setPrimaryFilters: "+JSON.stringify(data));for(var i=0;i<data.length;i++){console.log("primaryFilter: "+data[i].type),i>this.filters.length&&this.addFilter();var component=this.$refs.filter;0!=i&&(component=this.$refs.additionalFilter[i-1]),component.setFilterType(data[i]),data[i].value&&("university"==data[i].type&&component.setUniversityFilter(data[i].value),"universities"==data[i].type&&component.setUniversitiesFilter(data[i].value),"deal_owner"==data[i].type&&component.setDealOwnerFilter(data[i].value),"group"==data[i].type&&component.setUniversityGroupFilter(data[i].value),"account_type"==data[i].type&&component.setAccountTypeFilter(data[i].value),"quality_owner"==data[i].type&&component.setQualityOwnerFilter(data[i].value),"quality_owner_ies"==data[i].type&&component.setQualityOwnerFilter(data[i].value),"deal_owner_ies"==data[i].type&&component.setDealOwnerFilter(data[i].value),"farm_region"==data[i].type&&component.setFarmRegionFilter(data[i].value))}},getDateRange:function(){return this.dateRange},setDateRange:function(value){this.dateRange=value},setFilterKinds:function(value){this.filterKinds=value},setFilterLevels:function(value){this.filterLevels=value},setLocationValue:function(type,value){this.locationType=type,"region"==type.type&&(this.locationRegion=value),"state"==type.type&&(this.locationState=value),"city"==type.type&&(this.locationCity=value),"campus"==type.type&&(this.locationCampus=value)},setLocationType:function(value){this.locationType=value},setLocationRegion:function(value){this.locationRegion=value},setLocationState:function(value){this.locationState=value},setLocationCity:function(value){this.locationCity=value},setLocationCampus:function(value){this.locationCampus=value},setUniversityFilter:function(value){this.universityFilter=value},setUniversityGroupFilter:function(value){this.universityGroupFilter=value},setAccountTypeFilter:function(value){this.accountTypeFilter=value},setDealOwnerFilter:function(value){this.dealOwnerFilter=value},setProductLineFilter:function(value){this.filterProductLine=value},setProductLineSelectionType:function(value){this.productLineSelectionType=value},baseFiltersCaption:function(){var filters=[];if(""!=this.$refs.filter.filterType&&!_lodash.default.isNil(this.$refs.filter.filterType))if(""==this.$refs.filter.filterType.type)filters.push("Site Todo");else{var selection=this.$refs.filter.filterSelected();if("object"===(0,_typeof2.default)(selection.value)&&selection.value instanceof Array){var values=_lodash.default.map(selection.value,(function(entry){return entry.simple_name}));filters.push("".concat(selection.name," - ").concat(values.join(" - ")))}else filters.push("".concat(selection.name," - ").concat(selection.value.simple_name))}return filters.join(" - ")},baseFiltersList:function(){var baseFilters=[];if(""==this.$refs.filter.filterType||_lodash.default.isNil(this.$refs.filter.filterType)||baseFilters.push(this.$refs.filter.filterSelected()),console.log("filters.length: "+this.filters.length),console.log("ADITIONAL: "+JSON.stringify(this.$refs.additionalFilter)),this.filters.length>0){console.log("C:"+this.$refs.additionalFilter.length);for(var i=0;i<this.$refs.additionalFilter.length;i++){var component=this.$refs.additionalFilter[i];console.log("FITLRO: "+i+": TIPO: "+JSON.stringify(component.filterSelected())+" INDEX: "+baseFilters[i]+" C: "+component),""!=component.filterType&&baseFilters.push(component.filterSelected())}}return baseFilters},setFiltersData:function(data){var _this10=this,parsedFilters=_lodash.default.map(data.baseFilters,(function(entry){var filteredType=_lodash.default.filter(_this10.groupOptions,(function(filterEntry){return filterEntry.type==entry.type})),cloneType=_lodash.default.cloneDeep(filteredType[0]);return"university"==entry.type?cloneType.value=_queryString.default.solveEntry(_this10.universityOptions,entry.value.id,"id"):"universities"==entry.type?cloneType.value=_queryString.default.solveEntries(_this10.universityOptions,entry.value,"id"):"group"==entry.type?cloneType.value=_queryString.default.solveEntry(_this10.universityGroupOptions,entry.value.id,"id"):"deal_owner"==entry.type||"deal_owner_ies"==entry.type?cloneType.value=_queryString.default.solveEntry(_this10.dealOwnerOptions,entry.value.id,"id"):"account_type"==entry.type?cloneType.value=_queryString.default.solveEntry(_this10.accountTypeOptions,entry.value.id,"id"):"quality_owner"==entry.type||"quality_owner_ies"==entry.type?cloneType.value=_queryString.default.solveEntry(_this10.qualityOwnerOptions,entry.value.id,"id"):"farm_region"==entry.type&&(cloneType.value=_queryString.default.solveEntry(_this10.farmRegionOptions,entry.value.id,"id")),cloneType}));if(this.setPrimaryFilters(parsedFilters),_lodash.default.isNil(data.initialDate)||_lodash.default.isNil(data.finalDate)||this.setDateRange([(0,_moment.default)(data.initialDate).toDate(),(0,_moment.default)(data.finalDate).toDate()]),_lodash.default.isNil(data.kinds)||this.setFilterKinds(_queryString.default.solveEntries(this.kindOptions,data.kinds,"id")),_lodash.default.isNil(data.levels)||this.setFilterLevels(_queryString.default.solveEntries(this.levelOptions,data.levels,"id")),_lodash.default.isNil(data.productLine)||this.setProductLineFilter(_queryString.default.solveEntry(this.productLineOptions,data.productLine.id,"id")),_lodash.default.isNil(data.productLineSelectionType)||this.setProductLineSelectionType(data.productLineSelectionType),!_lodash.default.isNil(data.locationValue)&&!_lodash.default.isNil(data.locationType)){var locationData=data.locationValue;"city"==data.locationType&&(locationData={name:"".concat(locationData.name," - ").concat(locationData.state),id:locationData.name,state:locationData.state,city_id:locationData.city_id}),this.setLocationValue(_queryString.default.solveEntry(this.locationOptions,data.locationType,"type"),locationData)}},filterData:function(omitValidation){var baseFilters=this.baseFiltersList();if(console.log("baseFilters: "+JSON.stringify(baseFilters)+" omitValidation: "+omitValidation+" !o: "+!omitValidation),this.verifyBaseFilters(baseFilters,omitValidation)&&this.verifyFilters(omitValidation)){var initialDate=this.dateRange[0],finalDate=this.dateRange[1],locationType=null,locationValue=null;this.locationType&&("region"==(locationType=this.locationType.type)?locationValue=this.locationRegion.type:"state"==locationType?locationValue=this.locationState.type:"city"==locationType?(locationValue={name:this.locationCity.id,state:this.locationCity.state},_lodash.default.isNil(this.locationCity.city_id)||(locationValue.city_id=this.locationCity.city_id)):"campus"==locationType&&(locationValue=this.locationCampus.id));var returnMap={initialDate:initialDate,finalDate:finalDate,baseFilters:baseFilters,locationType:locationType,locationValue:locationValue,productLineSelectionType:this.productLineSelectionType};return"kind_and_level"==this.productLineSelectionType||0==this.productLineOptions.length?(returnMap.kinds=this.filterKinds,returnMap.levels=this.filterLevels):(returnMap.kinds=[],returnMap.levels=[]),"product_line"==this.productLineSelectionType&&(returnMap.productLine=this.filterProductLine),returnMap}}}};exports.default=_default}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-12"},[_c("panel-primary-filter",{ref:"filter",attrs:{"filter-options":_vm.groupOptions,"university-group-options":_vm.universityGroupOptions,"farm-region-options":_vm.farmRegionOptions,"university-options":_vm.universityOptions,"deal-owner-options":_vm.dealOwnerOptions,"quality-owner-options":_vm.qualityOwnerOptions,"account-type-options":_vm.accountTypeOptions},on:{valueSelected:_vm.primaryFilterSelected}})],1)]),_vm._v(" "),_vm._l(_vm.filters,(function(i){return _c("div",{key:i,staticClass:"row"},[_c("div",{staticClass:"col-md-11"},[_c("panel-primary-filter",{ref:"additionalFilter",refInFor:!0,attrs:{"filter-options":_vm.groupOptions,"university-group-options":_vm.universityGroupOptions,"university-options":_vm.universityOptions,"deal-owner-options":_vm.dealOwnerOptions,"quality-owner-options":_vm.qualityOwnerOptions,"account-type-options":_vm.accountTypeOptions},on:{valueSelected:_vm.primaryFilterSelected}})],1),_vm._v(" "),_c("div",{staticClass:"col-md-1"},[_c("i",{staticClass:"fas fa-trash-alt clickable",staticStyle:{"font-size":"30px",float:"right",color:"#ff0000"},on:{click:function($event){return _vm.removeFilter(i)}}})])])})),_vm._v(" "),_c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",{},[_c("label",{attrs:{for:"date"}},[_vm._v("PERÍODO")]),_vm._v(" "),_c("date-picker",{attrs:{disabled:_vm.periodDisabled,"first-day-of-week":1,lang:_vm.lang,range:"",shortcuts:_vm.shortcuts},on:{input:_vm.timeRangeSelected},model:{value:_vm.dateRange,callback:function($$v){_vm.dateRange=$$v},expression:"dateRange"}})],1)]),_vm._v(" "),_vm.hasProductLineOptions?[_c("div",{staticClass:"col-md-2 col-sm-6",staticStyle:{"margin-top":"10px"}},[_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.productLineSelectionType,expression:"productLineSelectionType"}],attrs:{type:"radio",name:"product_line_selection_type_"+_vm.index,value:"product_line",checked:""},domProps:{checked:_vm._q(_vm.productLineSelectionType,"product_line")},on:{change:function($event){_vm.productLineSelectionType="product_line"}}}),_vm._v(" "),_vm._m(0),_c("br"),_vm._v(" "),_c("input",{directives:[{name:"model",rawName:"v-model",value:_vm.productLineSelectionType,expression:"productLineSelectionType"}],attrs:{type:"radio",name:"product_line_selection_type_"+_vm.index,value:"kind_and_level"},domProps:{checked:_vm._q(_vm.productLineSelectionType,"kind_and_level")},on:{change:function($event){_vm.productLineSelectionType="kind_and_level"}}}),_vm._v(" "),_vm._m(1)]),_vm._v(" "),_vm.showProductLineSelection?_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",[_c("label",{attrs:{for:"kind-filter"}},[_vm._v("LINHA DE PRODUTO")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.productLineOptions,label:"name","track-by":"id",placeholder:"Todas as linhas de produto",selectLabel:"",deselectLabel:""},on:{input:_vm.productLineSelected},model:{value:_vm.filterProductLine,callback:function($$v){_vm.filterProductLine=$$v},expression:"filterProductLine"}})],1)]):_vm._e()]:_vm._e(),_vm._v(" "),_vm.showKindAndLevelSelection?[_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",[_c("label",{attrs:{for:"kind-filter"}},[_vm._v("MODALIDADE")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.kindOptions,multiple:!0,label:"name","track-by":"id",placeholder:"Todas as modalidades",selectLabel:"",deselectLabel:""},on:{input:_vm.kindValueSelected},model:{value:_vm.filterKinds,callback:function($$v){_vm.filterKinds=$$v},expression:"filterKinds"}})],1)]),_vm._v(" "),_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",[_c("label",{attrs:{for:"level-filter"}},[_vm._v("NÍVEL")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.levelOptions,multiple:!0,label:"name","track-by":"id",placeholder:"Todos os níveis",selectLabel:"",deselectLabel:""},on:{input:_vm.levelValueSelected},model:{value:_vm.filterLevels,callback:function($$v){_vm.filterLevels=$$v},expression:"filterLevels"}})],1)])]:_vm._e(),_vm._v(" "),_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",[_c("label",{attrs:{for:"level-filter"}},[_vm._v("LOCALIZACAO")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.locationOptions,label:"name","track-by":"type",placeholder:"Todas as localizaçoes",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.locationTypeSelected,remove:_vm.locationTypeSelected},model:{value:_vm.locationType,callback:function($$v){_vm.locationType=$$v},expression:"locationType"}})],1)]),_vm._v(" "),_vm.regionFilter?_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",[_c("label",{attrs:{for:"level-filter"}},[_vm._v("REGIÃO")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.regionsOptions,label:"name",placeholder:"Selecione a região",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.locationValueSelected,remove:_vm.locationValueRemoved},model:{value:_vm.locationRegion,callback:function($$v){_vm.locationRegion=$$v},expression:"locationRegion"}})],1)]):_vm._e(),_vm._v(" "),_vm.stateFilter?_c("div",{staticClass:"col-md-2 col-sm-6"},[_c("div",[_c("label",{attrs:{for:"level-filter"}},[_vm._v("ESTADO")]),_vm._v(" "),_c("cs-multiselect",{attrs:{options:_vm.statesOptions,label:"name",placeholder:"Selecione o estado",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.locationValueSelected},model:{value:_vm.locationState,callback:function($$v){_vm.locationState=$$v},expression:"locationState"}})],1)]):_vm._e(),_vm._v(" "),_vm.cityFilter?_c("div",{staticClass:"col-md-2 col-sm-6"},[_vm.cityFilterLoading?_c("div",{staticClass:"transparent-loader"},[_c("div",{staticClass:"loader loader-small loader-grey default-margin-top"})]):_vm._e(),_vm._v(" "),_c("div",[_c("label",{attrs:{for:"level-filter"}},[_vm._v("CIDADE")]),_vm._v(" "),_c("multiselect",{attrs:{"internal-search":!1,options:_vm.citiesSugestions,label:"name",placeholder:"Selecione a cidade",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.locationValueSelected,"search-change":_vm.citySearch},model:{value:_vm.locationCity,callback:function($$v){_vm.locationCity=$$v},expression:"locationCity"}})],1)]):_vm._e(),_vm._v(" "),_vm.campusFilter?_c("div",{staticClass:"col-md-2 col-sm-6"},[_vm.campusFilterLoading?_c("div",{staticClass:"transparent-loader"},[_c("div",{staticClass:"loader loader-small loader-grey default-margin-top"})]):_vm._e(),_vm._v(" "),_c("div",[_c("label",{attrs:{for:"level-filter"}},[_vm._v("CAMPUS")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.campusOptions,label:"name",placeholder:"Selecione o campus",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.locationValueSelected},model:{value:_vm.locationCampus,callback:function($$v){_vm.locationCampus=$$v},expression:"locationCampus"}})],1)]):_vm._e()],2)],2)])},__vue__options__.staticRenderFns=[function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("label",{attrs:{for:""}},[_c("span",{staticClass:"tiny-padding-left",staticStyle:{"font-size":"18px"}},[this._v("Linha de Produto")])])},function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("label",{attrs:{for:""}},[_c("span",{staticClass:"tiny-padding-left",staticStyle:{"font-size":"18px"}},[this._v("Customizado")])])}]})),require.register("web/static/templates/panel-primary-filter.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=_interopRequireDefault(require("lodash")),_default={data:function(){return{filterType:null,universityFilter:"",universitiesFilter:[],universityGroupFilter:"",accountTypeFilter:"",dealOwnerFilter:"",qualityOwnerFilter:"",farmRegionFilter:"",universitySugestions:[]}},props:["filterOptions","universityOptions","universityGroupOptions","dealOwnerOptions","accountTypeOptions","qualityOwnerOptions","permitEmpty","farmRegionOptions"],components:{Multiselect:_interopRequireDefault(require("vue-multiselect")).default},mounted:function(){this.universitySugestions=this.universityOptions},watch:{universityOptions:function(value){this.universitySugestions=this.universityOptions}},methods:{setFilterType:function(value){this.filterType=value},setUniversityFilter:function(value){this.universityFilter=value},setUniversitiesFilter:function(value){this.universitiesFilter=value},setUniversityGroupFilter:function(value){this.universityGroupFilter=value},setAccountTypeFilter:function(value){this.accountTypeFilter=value},setDealOwnerFilter:function(value){this.dealOwnerFilter=value},setQualityOwnerFilter:function(value){this.qualityOwnerFilter=value},setFarmRegionFilter:function(value){this.farmRegionFilter=value},universitySearch:function(data,id){if(""!=data){var filteredData=data.normalize("NFD").replace(/[\u0300-\u036f]/g,"");this.universitySugestions=this.universityOptions.filter((function(item_data){return item_data.name.normalize("NFD").replace(/[\u0300-\u036f]/g,"").toUpperCase().includes(filteredData.toUpperCase())}))}else this.universitySugestions=this.universityOptions},filterValueSelected:function(){var _this=this;this.$nextTick((function(){_this.$emit("valueSelected")}))},filterSelected:function(){if(!_lodash.default.isNil(this.filterType)){var currentFilter=_lodash.default.cloneDeep(this.filterType);return"university"===this.filterType.type&&(currentFilter.value=this.universityFilter),"group"===this.filterType.type&&(currentFilter.value=this.universityGroupFilter),"deal_owner"!==this.filterType.type&&"deal_owner_ies"!==this.filterType.type||(currentFilter.value=this.dealOwnerFilter),"account_type"===this.filterType.type&&(currentFilter.value=this.accountTypeFilter),"quality_owner"!==this.filterType.type&&"quality_owner_ies"!==this.filterType.type||(currentFilter.value=this.qualityOwnerFilter),"universities"===this.filterType.type&&(currentFilter.value=this.universitiesFilter),"farm_region"===this.filterType.type&&(currentFilter.value=this.farmRegionFilter),currentFilter}},validateFilter:function(){var filter=this.filterSelected();if(_lodash.default.isNil(filter))return!!this.permitEmpty||(alert("Selecione um filtro"),!1);if("all"==filter.type)return!0;var temDimensao=!1;if(_lodash.default.isNil(filter.value)||_lodash.default.isNil(filter.value.length)||(temDimensao=!0),""!=filter.type)if(temDimensao){if(0==filter.value.length)return alert("Selecione o valor para o filtro ".concat(filter.name)),!1}else{if(!filter.value)return alert("Selecione o valor para o filtro ".concat(filter.name)),!1;if(!filter.value.id)return alert("Selecione o valor para o filtro ".concat(filter.name)),!1}return!0}}};exports.default=_default}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticClass:"row"},[_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("FILTRO")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.filterOptions,label:"name",placeholder:"Selecione o tipo de filtro",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected},model:{value:_vm.filterType,callback:function($$v){_vm.filterType=$$v},expression:"filterType"}})],1)]),_vm._v(" "),_vm.filterType&&"university"==_vm.filterType.type?_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("UNIVERSIDADE")]),_vm._v(" "),_c("multiselect",{attrs:{"internal-search":!1,options:_vm.universitySugestions,label:"name",placeholder:"Selecione a universidade",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected,"search-change":_vm.universitySearch},model:{value:_vm.universityFilter,callback:function($$v){_vm.universityFilter=$$v},expression:"universityFilter"}})],1)]):_vm._e(),_vm._v(" "),_vm.filterType&&"universities"==_vm.filterType.type?_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("UNIVERSIDADES")]),_vm._v(" "),_c("multiselect",{attrs:{"internal-search":!1,multiple:!0,options:_vm.universitySugestions,"track-by":"id",label:"name",placeholder:"Selecione a universidade",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected,"search-change":_vm.universitySearch},model:{value:_vm.universitiesFilter,callback:function($$v){_vm.universitiesFilter=$$v},expression:"universitiesFilter"}})],1)]):_vm._e(),_vm._v(" "),_vm.filterType&&"group"==_vm.filterType.type?_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("GRUPO")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.universityGroupOptions,label:"name",placeholder:"Selecione o grupo",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected},model:{value:_vm.universityGroupFilter,callback:function($$v){_vm.universityGroupFilter=$$v},expression:"universityGroupFilter"}})],1)]):_vm._e(),_vm._v(" "),_vm.filterType&&"farm_region"==_vm.filterType.type?_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("REGIÃO DO FARM")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.farmRegionOptions,label:"name",placeholder:"Selecione a região",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected},model:{value:_vm.farmRegionFilter,callback:function($$v){_vm.farmRegionFilter=$$v},expression:"farmRegionFilter"}})],1)]):_vm._e(),_vm._v(" "),!_vm.filterType||"deal_owner"!=_vm.filterType.type&&"deal_owner_ies"!=_vm.filterType.type?_vm._e():_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("FARMER")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.dealOwnerOptions,label:"name",placeholder:"Selecione o farmer",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected},model:{value:_vm.dealOwnerFilter,callback:function($$v){_vm.dealOwnerFilter=$$v},expression:"dealOwnerFilter"}})],1)]),_vm._v(" "),_vm.filterType&&"account_type"==_vm.filterType.type?_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("CARTEIRA")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.accountTypeOptions,label:"name",placeholder:"Selecione a carteira",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected},model:{value:_vm.accountTypeFilter,callback:function($$v){_vm.accountTypeFilter=$$v},expression:"accountTypeFilter"}})],1)]):_vm._e(),_vm._v(" "),!_vm.filterType||"quality_owner"!=_vm.filterType.type&&"quality_owner_ies"!=_vm.filterType.type?_vm._e():_c("div",{staticClass:"col-md-4 col-sm-6"},[_c("div",[_c("label",{attrs:{for:""}},[_vm._v("QUALI")]),_vm._v(" "),_c("multiselect",{attrs:{options:_vm.qualityOwnerOptions,label:"name",placeholder:"Selecione o quali",selectLabel:"",deselectLabel:"",selectedLabel:"Selecionado"},on:{select:_vm.filterValueSelected},model:{value:_vm.qualityOwnerFilter,callback:function($$v){_vm.qualityOwnerFilter=$$v},expression:"qualityOwnerFilter"}})],1)])])},__vue__options__.staticRenderFns=[]})),require.register("web/static/templates/scatter-chart.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;var _lodash=_interopRequireDefault(require("lodash")),_scatterChart=_interopRequireDefault(require("../js/components/vue-charts/scatter-chart")),_chart=_interopRequireDefault(require("chart.js")),_moment=_interopRequireDefault(require("moment")),_fileSaver=require("file-saver"),_default2={data:function(){return{loading:!1,baseSeriesColors:["#35b6cc","#fdc029","#09b67c","#bf265f"],chartData:{labels:[],datasets:[]},exportChartData:{labels:[],datasets:[]},exportChartOptions:{},chartOptions:{layout:{padding:{left:0,right:0,top:50,bottom:0}},tooltips:{enabled:!0},extended:{drawRectangles:!1,rectangles:[],drawValuesInChart:!1,drawPercentageValuesInChart:!1,useAlternativeDataSet:!1},animation:!1,responsive:!0,maintainAspectRatio:!1,legend:{position:"bottom",labels:{fontColor:"white",usePointStyle:!0},onClick:this.onLegendClick},elements:{point:{radius:2}},scales:{xAxes:[{ticks:{display:!0,fontColor:"#ffffff"},gridLines:{display:!0,drawBorder:!0},style:{color:"#ffffff"}}],yAxes:[{position:"left",id:"y-axis-0",ticks:{beginAtZero:!0,display:!0,fontColor:"#ffffff"}},{position:"right",id:"y-axis-1",ticks:{display:!0,fontColor:"#ffffff"}}]}}}},mounted:function(){this.copyOptionsToExport()},props:{exportName:String,exportLink:{type:Boolean,default:function(){return!0}},baseHeight:{type:Number,default:function(){return 300}}},components:{ScatterChart:_scatterChart.default},computed:{exportFileName:function(){return _lodash.default.isNil(this.exportName)?"chart.png":"".concat(this.exportName,".png")}},methods:{nDots:function(input){if("number"==typeof input)return 1;for(var nDots=0,i=-1;-1!=(i=input.indexOf(".",i+1));)nDots++;return nDots},removeAditionalDots:function removeAditionalDots(input){for(var first=input.indexOf("."),i=-1;-1!=(i=input.indexOf(".",first+1));)input=input.slice(0,i)+input.slice(i+1);return eval(input)},emptyNull:function(value){return _lodash.default.isNil(value)?"":value},exportData:function(){var baseName=this.exportName;_lodash.default.isNil(baseName)&&(baseName="scatter_data");var filename=baseName+"_"+(0,_moment.default)().format("MM_DD_YYYY_hh_mm_ss_a")+".csv",content="Indice";_lodash.default.isNil(this.chartOptions.scales.xAxes[0].scaleLabel.labelString)||(content=this.chartOptions.scales.xAxes[0].scaleLabel.labelString);for(var i=0;i<this.chartData.datasets.length;i++)content=content+";"+this.chartData.datasets[i].label;content+="\n";for(var firstDataset=this.chartData.datasets.values().next().value,row=0;row<firstDataset.data.length;row++){content+=firstDataset.data[row].x;for(i=0;i<this.chartData.datasets.length;i++)content=content+";"+this.emptyNull(this.chartData.datasets["".concat(i)].data[row].y);content+="\n"}var blob=new Blob([content],{type:"text/plain;charset=utf-8"});(0,_fileSaver.saveAs)(blob,filename)},solvePlotData:function solvePlotData(point,index){var _this=this,chartInstance=this.$refs.chart.$data._chart,mappedData=_lodash.default.map(chartInstance.data.datasets[index].data,(function(entry){return{_model:{x:entry.x,y:entry.y,skip:!1}}})),curve=_chart.default.helpers.splineCurveMonotone(mappedData),finalMapped=_lodash.default.reduce(mappedData,(function(acc,entry){if(!_lodash.default.isNil(entry._model.controlPointPreviousX)){var xValue=eval(entry._model.controlPointPreviousX),yValue=entry._model.controlPointPreviousY;"string"==typeof yValue&&(yValue=-1!=yValue.indexOf("-")?eval(yValue):_this.nDots(yValue)>1?_this.removeAditionalDots(yValue):eval(yValue)),acc.push({x:xValue,y:yValue})}if(acc.push({x:entry._model.x,y:entry._model.y}),!_lodash.default.isNil(entry._model.controlPointNextX)){var _xValue=eval(entry._model.controlPointNextX),_yValue=entry._model.controlPointNextY;"string"==typeof _yValue&&(_yValue=-1!=_yValue.indexOf("-")?eval(_yValue):_this.nDots(_yValue)>1?_this.removeAditionalDots(_yValue):eval(_yValue)),acc.push({x:_xValue,y:_yValue})}return acc}),[]),xScale=point.x,yScale=point.y;if(_lodash.default.isNil(yScale))for(var current=null,j=0;j<finalMapped.length;j++){var next=finalMapped[j],xPoint=point.x;if(!_lodash.default.isNil(current))if(current.x>next.x){if(xPoint>next.x&&xPoint<=current.x){console.log("yScale) ESTA DETRO DO INTERVALO 1 ("+current.x+", "+current.y+") - ("+next.x+", "+next.y+")");var diffX=current.x-next.x,diffY=current.y-next.y,minY=next.y,refX=current.x;diffY<0&&(diffY=next.y-current.y,refX=next.x,minY=current.y);var relation=diffY/diffX,xRelationDelta=xPoint-refX;xRelationDelta<0&&(xRelationDelta=refX-xPoint);var yInterpolated=xRelationDelta*relation+eval(minY);yScale=yInterpolated}}else xPoint>current.x&&xPoint<=next.x&&console.log("yScale) ESTA DETRO DO INTERVALO 2 ("+current.x+", "+current.y+") - ("+next.x+", "+next.y+")");current=next}if(_lodash.default.isNil(xScale))for(var current=null,j=0;j<finalMapped.length;j++){var _next=finalMapped[j],yPoint=point.y;if(!_lodash.default.isNil(current))if(current.y>_next.y)yPoint>_next.y&&yPoint<=current.y&&console.log("xScale) ESTA DETRO DO INTERVALO 1 ("+current.x+", "+current.y+") - ("+_next.x+", "+_next.y+")");else if(yPoint>current.y&&yPoint<=_next.y){var _diffY=_next.y-current.y,diffX=_next.x-current.x,minX=current.x,refY=current.y;diffX<0&&(diffX=current.x-_next.x,minX=_next.x,refY=_next.y);var _relation=diffX/_diffY,yRelationDelta=yPoint-refY;yRelationDelta<0&&(yRelationDelta=refY-yPoint);var xInterpolated=yRelationDelta*_relation+eval(minX);xScale=xInterpolated}current=_next}return{x:xScale,y:yScale}},onLegendClick:function(eventData,legendItem){var _this2=this,index=legendItem.datasetIndex,currentChart=this.$refs.chart.$data._chart,meta=currentChart.getDatasetMeta(index);null===meta.hidden?meta.hidden=!0:meta.hidden=null,currentChart.update();var exportChart=this.$refs.exportChart.$data._chart,newExportSet=[];_lodash.default.each(this.chartData.datasets,(function(entry,index){currentChart.getDatasetMeta(index).hidden||newExportSet.push(_this2.chartData.datasets[index])})),this.exportChartData.datasets=newExportSet,exportChart.update(),this.setExportChartLink()},setRectangles:function(rectangles){this.chartOptions.extended.drawRectangles=!0,this.chartOptions.extended.rectangles=rectangles},setXAxisTitle:function(index,label){this.chartOptions.scales.xAxes[index].scaleLabel={},this.chartOptions.scales.xAxes[index].scaleLabel.labelString=label,this.chartOptions.scales.xAxes[index].scaleLabel.display=!0,this.chartOptions.scales.xAxes[index].scaleLabel.fontColor="#ffffff"},setYAxisTitle:function(index,label){this.chartOptions.scales.yAxes[index].scaleLabel={},this.chartOptions.scales.yAxes[index].scaleLabel.labelString=label,this.chartOptions.scales.yAxes[index].scaleLabel.display=!0,this.chartOptions.scales.yAxes[index].scaleLabel.fontColor="#ffffff"},clearSeries:function(){for(;this.chartData.datasets.length>0;)this.chartData.datasets.splice(0,1),this.exportChartData.datasets.splice(0,1);this.updateChart()},copyOptionsToExport:function(){this.exportChartOptions=_lodash.default.cloneDeep(this.chartOptions),this.exportChartOptions.legend.labels.fontSize=16,this.exportChartOptions.legend.labels.fontColor="#000000",this.exportChartOptions.extended.drawValuesColor="#000000",_lodash.default.isNil(this.exportChartOptions.extended)||_lodash.default.isNil(this.exportChartOptions.extended.rectangles)||_lodash.default.each(this.exportChartOptions.extended.rectangles,(function(entry){entry.legendColor="#000000"})),_lodash.default.each(this.exportChartOptions.scales.yAxes,(function(entry){_lodash.default.isNil(entry.scaleLabel)||(entry.scaleLabel.fontSize=16,entry.scaleLabel.fontColor="#000000",entry.ticks.fontSize=16,entry.ticks.fontColor="#000000")})),_lodash.default.each(this.exportChartOptions.scales.xAxes,(function(entry){_lodash.default.isNil(entry.scaleLabel)||(entry.scaleLabel.fontSize=16,entry.scaleLabel.fontColor="#000000",entry.ticks.fontSize=16,entry.ticks.fontColor="#000000")}))},setDisplayLegend:function(value){this.chartOptions.legend.display=value},setYBeginAtZero:function(value){this.chartOptions.scales.yAxes[0].ticks.beginAtZero=value},setAlternativeDataSet:function(value){this.chartOptions.extended.useAlternativeDataSet=value},setToolTips:function(value){this.chartOptions.tooltips.enabled=value},setDrawValues:function(value){this.chartOptions.extended.drawValuesInChart=value,this.chartOptions.extended.drawValuesColor="#ffffff"},setYMax:function(value){this.chartOptions.scales.yAxes[0].ticks.max=value,this.updateChart()},setLoader:function(){this.loading=!0},resetLoader:function(){this.loading=!1},updateChart:function(){this.$refs.chart.updateChart(),this.copyOptionsToExport(),this.$refs.exportChart.updateChart(),this.setExportChartLink()},setExportChartLink:function(){var _this3=this;this.$nextTick((function(){if(_this3.exportLink){var chart_data=_this3.$refs.exportChart.$data._chart.canvas.toDataURL("image/jpg");_this3.$refs.exportLink.href=chart_data}}))},setLabels:function(labels){this.chartData.labels=labels},setSeries:function(index,data,title){this.setSeriesWithOptions(index,data,title,{})},setSeriesWithOptions:function(index,data,title,options){if(index>=this.chartData.datasets.length){var color=options.seriesColor,fill=options.fill;_lodash.default.isNil(color)&&(color=this.baseSeriesColors[index]),_lodash.default.isNil(fill)&&(fill=!1),this.chartData.datasets.push({label:"",backgroundColor:color,borderColor:color,data:[],labelsData:[],fill:fill,borderWidth:3,showLine:!0,xAxisID:"x-axis-1",yAxisID:"y-axis-".concat(index),cubicInterpolationMode:"monotone"})}this.chartData.datasets[index].data=data,this.chartData.datasets[index].label=title,options.labelsData&&(this.chartData.datasets[index].labelsData=options.labelsData),this.exportChartData=_lodash.default.cloneDeep(this.chartData),_lodash.default.each(this.exportChartData.datasets,(function(dataset){dataset.borderWidth=3}))}}};exports.default=_default2}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _vm=this,_h=_vm.$createElement,_c=_vm._self._c||_h;return _c("div",{staticStyle:{position:"relative"}},[_vm.loading?_c("div",{staticClass:"loader-container centered-loader-container"},[_c("div",{staticClass:"loader"})]):_vm._e(),_vm._v(" "),_c("div",{directives:[{name:"show",rawName:"v-show",value:_vm.exportLink,expression:"exportLink"}],staticStyle:{display:"flex","justify-content":"flex-end"}},[_c("div",{staticClass:"dropdown",staticStyle:{height:"auto !important",border:"0 !important"},attrs:{"data-ref":"export-data"}},[_vm._m(0),_vm._v(" "),_c("ul",{staticClass:"dropdown-menu dropdown-menu-right"},[_c("li",[_c("a",{ref:"exportLink",staticClass:"clickable",attrs:{download:_vm.exportFileName}},[_vm._v("Figura")])]),_vm._v(" "),_c("li",[_c("a",{staticClass:"clickable",on:{click:function($event){return _vm.exportData()}}},[_vm._v("Dados")])])])])]),_vm._v(" "),_c("scatter-chart",{ref:"chart",attrs:{data:_vm.chartData,options:_vm.chartOptions,height:_vm.baseHeight}}),_vm._v(" "),_c("scatter-chart",{ref:"exportChart",staticStyle:{"z-index":"-1",position:"absolute",width:"100%",top:"19px"},attrs:{data:_vm.exportChartData,options:_vm.exportChartOptions,height:_vm.baseHeight}})],1)},__vue__options__.staticRenderFns=[function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticStyle:{height:"auto !important"},attrs:{"data-toggle":"dropdown"}},[_c("span",{staticClass:"glyphicon glyphicon-download"})])}]})),require.register("web/static/templates/server-side-error.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(require("lodash"));var _default={components:{BAlert:require("bootstrap-vue").BAlert}};exports.default=_default}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"row"},[_c("b-alert",{attrs:{show:"",variant:"danger"}},[this._v("Erro no servidor. Tente novamente. Se persistir, entre em contato com os responsáveis pelo PPA.")])],1)},__vue__options__.staticRenderFns=[]})),require.register("web/static/templates/server-side-warning.vue",(function(exports,require,module){!function(){"use strict";var _interopRequireDefault=require("@babel/runtime/helpers/interopRequireDefault");Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=void 0;_interopRequireDefault(require("lodash"));var _default={props:["message"],components:{BAlert:require("bootstrap-vue").BAlert}};exports.default=_default}(),module.exports.__esModule&&(module.exports=module.exports.default);var __vue__options__="function"==typeof module.exports?module.exports.options:module.exports;__vue__options__.render=function(){var _h=this.$createElement,_c=this._self._c||_h;return _c("div",{staticClass:"row"},[_c("b-alert",{attrs:{show:"",variant:"warning"}},[this._v(this._s(this.message))])],1)},__vue__options__.staticRenderFns=[]})),require.alias("buffer/index.js","buffer"),require.alias("events/events.js","events"),require.alias("process/browser.js","process"),require.alias("stream-browserify/index.js","stream"),require.alias("vue/dist/vue.js","vue"),process=require("process"),require.register("___globals___",(function(exports,require,module){window.Vue=require("vue/dist/vue.js")}))}(),require("___globals___"),require("web/static/js/demand-curves");
